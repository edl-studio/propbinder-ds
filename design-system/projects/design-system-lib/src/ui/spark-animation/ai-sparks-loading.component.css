/* Container styles */
.ai-sparks-loading {
  position: relative;
  overflow: visible;
  width: 48px;
  height: 48px;
}

/* Particle container styles */
.particle-container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
  z-index: 3;
  --timescale: 1.5s;
  pointer-events: none;
}

.pt {
  --orbit-radius: calc(var(--xd) * 4px);
  display: block;
  position: absolute;
  left: calc(var(--x) * 1%);
  top: calc(var(--y) * 1%);
  height: 50px;
  transform-origin: center;
  animation: orbit calc(var(--timescale) * var(--yt)) infinite linear;
  animation-delay: calc(-1s * var(--d, 0));
}

.pt b {
  display: block;
  width: calc(var(--w) * 1px);
  height: calc(var(--w) * 1px);
  position: absolute;
  opacity: var(--o, 1);
  background: radial-gradient(circle, var(--color) 0%, transparent 70%);
  transform-origin: center;
  animation: 
    selfRotate calc(var(--timescale) * var(--xt)) infinite linear reverse,
    levitate calc(2s * var(--yd)) infinite ease-in-out alternate,
    flicker calc(2s * var(--xd)) infinite alternate cubic-bezier(.45,.05,.55,.95);
  animation-delay: 
    calc(-1s * var(--d, 0)),
    calc(-0.5s * var(--d, 0)),
    calc(-0.2s * var(--d, 0));
  filter: blur(0.3px);
}

@keyframes orbit {
  from {
    transform: rotate(0deg) translateX(var(--orbit-radius));
  }
  to {
    transform: rotate(360deg) translateX(var(--orbit-radius));
  }
}

@keyframes selfRotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(-360deg);
  }
}

@keyframes levitate {
  0% {
    transform: translateY(calc(-1px * var(--yd)));
  }
  100% {
    transform: translateY(calc(1px * var(--yd)));
  }
}

@keyframes flicker {
  0% { opacity: calc(var(--o, 1) - 0.1); }
  100% { opacity: calc(var(--o, 1) + 0.1); }
}

.ai-sparks-loading__wrapper {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  transform: scale(0.8);
  transition: opacity 300ms cubic-bezier(0.34, 1.56, 0.64, 1),
              transform 300ms cubic-bezier(0.34, 1.56, 0.64, 1);
  z-index: 2;
}

.ai-sparks-loading__wrapper--loading {
  z-index: 2;
}

.ai-sparks-loading__wrapper--static {
  z-index: 1;
}

.ai-sparks-loading__wrapper--appear {
  opacity: 1;
  transform: scale(1);
}

/* Base spark styles */
.ai-sparks-loading__spark {
  position: absolute;
  pointer-events: none;
  opacity: 1;
  filter: drop-shadow(0 0 8px var(--color-brand-weak));
  will-change: transform;
  z-index: 1;
}

.ai-sparks-loading__wrapper--loading .ai-sparks-loading__spark--large {
  z-index: 4;
}

/* Size variants */
.ai-sparks-loading__spark--large {
  width: 32px;
  height: 32px;
}

.ai-sparks-loading__spark--medium {
  width: 18px;
  height: 18px;
}

.ai-sparks-loading__spark--small {
  width: 14px;
  height: 14px;
}

/* Loading animation */
.ai-sparks-loading__wrapper--loading .ai-sparks-loading__spark {
  --orbit-radius: 4px;
  transform-origin: center;
  transform: rotate(0deg) translate(var(--orbit-radius)) rotate(0deg);
}

.ai-sparks-loading__wrapper--loading .ai-sparks-loading__spark--large {
  --orbit-radius: 6px;
  transform-origin: 50% 150%;
}

.ai-sparks-loading__wrapper--loading .ai-sparks-loading__spark--medium {
  --orbit-radius: 5px;
  transform-origin: 150% 50%;
}

.ai-sparks-loading__wrapper--loading .ai-sparks-loading__spark--small {
  --orbit-radius: 4px;
  transform-origin: 50% -50%;
}

.ai-sparks-loading__wrapper--loading .ai-sparks-loading__spark--animating {
  animation: sparkOrbit var(--orbit-duration, 3s) linear infinite;
}

.ai-sparks-loading__wrapper--loading .ai-sparks-loading__spark--large.ai-sparks-loading__spark--animating {
  --orbit-duration: 4s;
}

.ai-sparks-loading__wrapper--loading .ai-sparks-loading__spark--medium.ai-sparks-loading__spark--animating {
  --orbit-duration: 3s;
}

.ai-sparks-loading__wrapper--loading .ai-sparks-loading__spark--small.ai-sparks-loading__spark--animating {
  --orbit-duration: 2s;
}

@keyframes sparkOrbit {
  from {
    transform: rotate(0deg) translate(var(--orbit-radius)) rotate(0deg);
  }
  to {
    transform: rotate(360deg) translate(var(--orbit-radius)) rotate(-360deg);
  }
}
